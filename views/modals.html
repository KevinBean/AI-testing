<!-- Help Modal -->
<div class="modal fade" id="helpModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Help & Documentation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h5>Getting Started</h5>
        <p>This system helps you manage technical content using three main components:</p>
        <ul>
          <li><strong>Blocks</strong> - Reusable pieces of technical content written in Markdown</li>
          <li><strong>References</strong> - Citations to standards, papers, reports, or other documents</li>
          <li><strong>Documents</strong> - Complete documents composed of paragraphs that can reference your blocks</li>
        </ul>
        
        <h5>Markdown Tips</h5>
        <p>This system uses Markdown formatting:</p>
        <ul>
          <li><code>**text**</code> for <strong>bold text</strong></li>
          <li><code>*text*</code> for <em>italic text</em></li>
          <li><code># Heading</code> for headings (more # means smaller heading)</li>
          <li><code>- item</code> for bullet lists</li>
          <li><code>1. item</code> for numbered lists</li>
          <li><code>[link text](URL)</code> for links</li>
        </ul>
        
        <h5>Workflow Example</h5>
        <ol>
          <li>Create references in the References tab</li>
          <li>Create blocks in the Blocks tab and associate them with references</li>
          <li>Create documents that reference your blocks</li>
        </ol>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Import Options Modal -->
<div class="modal fade" id="importOptionsModal" tabindex="-1" role="dialog" aria-labelledby="importOptionsModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="importOptionsModalLabel">Import Options</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Choose how to handle the imported data:</p>
        <div class="form-group">
          <div class="custom-control custom-radio">
            <input type="radio" id="replaceOption" name="importOption" class="custom-control-input" value="replace" checked>
            <label class="custom-control-label" for="replaceOption">
              <strong>Replace</strong> - Overwrite existing entries with the same ID
            </label>
            <small class="form-text text-muted ml-4">Use this option if you're restoring from a backup.</small>
          </div>
        </div>
        <div class="form-group">
          <div class="custom-control custom-radio">
            <input type="radio" id="mergeOption" name="importOption" class="custom-control-input" value="merge">
            <label class="custom-control-label" for="mergeOption">
              <strong>Merge</strong> - Keep existing entries when there are conflicts
            </label>
            <small class="form-text text-muted ml-4">Use this option to combine data from multiple sources.</small>
          </div>
        </div>
        <div class="alert alert-info">
          <i class="fas fa-info-circle"></i> The import process will handle <strong><span id="importItemCount">0</span></strong> items in total.
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmImport">Import</button>
      </div>
    </div>
  </div>
</div>

<!-- Content Selection Modal for Actions -->
<div class="modal fade" id="contentSelectionModal" tabindex="-1" role="dialog" aria-labelledby="contentSelectionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="contentSelectionModalLabel">Select Content for Action</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <div class="alert alert-info action-selection-info">
            Please select content to process with this action.
          </div>
        </div>
        
        <ul class="nav nav-tabs" id="selectionTabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="blocks-selection-tab" data-toggle="tab" href="#blocksSelectionTab" role="tab">Blocks</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="paragraphs-selection-tab" data-toggle="tab" href="#paragraphsSelectionTab" role="tab">Paragraphs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="tags-selection-tab" data-toggle="tab" href="#tagsSelectionTab" role="tab">Tags</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="references-selection-tab" data-toggle="tab" href="#referencesSelectionTab" role="tab">References</a>
          </li>
        </ul>
        
        <div class="tab-content mt-3">
          <!-- Existing Blocks Tab -->
          <div class="tab-pane fade show active" id="blocksSelectionTab" role="tabpanel">
            <div class="input-group mb-3">
              <input type="text" id="blockSelectionSearch" class="form-control" placeholder="Search blocks...">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="searchBlocksSelectionBtn">
                  <i class="fas fa-search"></i> Search
                </button>
              </div>
            </div>
            <div class="block-selection-list overflow-auto" style="max-height: 300px;">
              <!-- Blocks will be loaded here -->
              <div class="text-center py-3">
                <i class="fas fa-spinner fa-spin"></i> Loading blocks...
              </div>
            </div>
          </div>
          
          <!-- Other selection tabs... -->
        </div>
        
        <div class="mt-3">
          <h6>Selected items (<span id="selectedItemsCount">0</span>):</h6>
          <div id="selectedItemsList" class="border rounded p-2" style="min-height: 60px; max-height: 120px; overflow-y: auto;">
            <p class="text-muted text-center mb-0">No items selected</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmContentSelection">Apply & Run Action</button>
      </div>
    </div>
  </div>
</div>
